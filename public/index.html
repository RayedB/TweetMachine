<html>
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>UpTalk board messages!</title>

  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="font-awesome/css/font-awesome.css" rel="stylesheet">
  <link href="css/animate.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">

  <script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.8/angular-ui-router.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.2/socket.io.js"></script>
  <script src="socket.js"></script>
  <script src="app.js"></script>


</head>
<body ng-app="tweetmachine" ng-controller="MainCtrl" class="top-navigation">

  <div id="wrapper">
    <div id="page-wrapper" class="gray-bg" ui-view>
      <div class="row border-bottom white-bg">
        <nav class="navbar navbar-static-top" role="navigation">
          <div class="navbar-header">
            <a href="#" class="navbar-brand">TweetMachine</a>
          </div>
          <div class="navbar-collapse collapse" id="navbar">
            <ul class="nav navbar-nav">
              <li>
                <div class="navbar-header">
                  <div class="form-group">
                    <form>
                      <input id="top-form" type="text" name="top-search" class="form-control" id="top-search" placeholder="Search for something..." ng-model="search">
                    </form>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </nav>
      </div>
      <div class="row m-b-lg m-t-lg">
        <div class="col-md-8">
          <div class="profile-image">
            <img src="img/a4.jpg" class="img-circle circle-border m-b-md" alt="profile">
          </div>
          <div class="profile-info">
            
            <h2 class="no-margins">
              Alex Smith
            </h2>
            <h4>Founder of Groupeq</h4>
            <small>
              There are many variations of passages of Lorem Ipsum available, but the majority
              have suffered alteration in some form Ipsum available.
            </small>
          </div>
        </div>
        <div class="col-md-4">
          <table class="table small m-b-xs">
            <tbody>
              <tr>
                <td>
                  <strong>142</strong> Projects
                </td>
                <td>
                  <strong>22</strong> Followers
                </td>
              </tr>
              <tr>
                <td>
                  <strong>61</strong> Comments
                </td>
                <td>
                  <strong>54</strong> Articles
                </td>
              </tr>
              <tr>
                <td>
                  <strong>154</strong> Tags
                </td>
                <td>
                  <strong>32</strong> Friends
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="row">
        <div class="col-md-8" id="tweets" >
          <div class="social-feed-box" ng-repeat="post in posts | orderBy:'-date' | filter: search | limitTo:50" >
            <div class="social-avatar">
              <a href="" class="pull-left">
                <img alt="image" src="{{post.avatar}}">
              </a>
              <div class="media-body">
                <a href="#">
                  {{post.author}}
                </a>
                <small class="text-muted">{{post.date}}</small>
              </div>
            </div>
            <div class="social-body">
              <p>
                {{post.body}} 
              </p>
              <div class="btn-group">
                <button class="btn btn-white btn-xs"><i class="fa fa-retweet"></i> {{post.retweet}}</button>
                <button class="btn btn-white btn-xs"><i class="fa fa-heart"></i> {{post.favorite}}</button>
              </div>
              <div class="btn-group pull-right">
                <button class="btn btn-white btn-xs pull-right" ng-click="delete(twid)"><i class="fa fa-trash"></i>Delete </button>
              </div>
            </div>
            
          </div>
        </div>
        <div class="col-md-4">
          <div class="ibox">
            <div class="ibox-content">
              <h3>Post a message</h3>
              <div class="form-group">
                <form ng-submit="addPost()">
                  <label>Title</label>
                  <input type="text" name="title" class="form-control" ng-model="title">
                  <label>Link</label>
                  <input type="text" name="title" class="form-control" ng-model="link">
                  <label>Message</label>
                  <textarea class="form-control" placeholder="Your message" rows="8" ng-model="message"></textarea>
                </div>
                <button class="btn btn-primary btn-block" type="submit" >Send</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <script>
  $( document ).ready(function() {
    var socket = io.connect('http://localhost:3000');
    socket.on('tweet',function(tweet){
      $('#tweets').append('<div class="social-feed-box><div class="social-body"><p>'+tweet.body+'</p></div></div>');
      //$scope.posts.push(tweet);
    })
    });
  </script>
  </body>
  </html>